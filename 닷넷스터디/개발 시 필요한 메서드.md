## ê°œë°œ ì‹œ í•„ìš”í•œ ë©”ì„œë“œ



### ğŸ¿Null Check

```c#
string.IsNullorEmpty(ë¬¸ìì—´ê°’)
```

```c#
//ì‚¼í•­ì—°ì‚°ì ì‚¬ìš©
//nullì¼ë•Œ ë¹ˆì¹¸, ì•„ë‹ë•Œ í•´ë‹¹ ê°’ì„ @mgmt_filename ì¹¼ëŸ¼ì— ë„£ê¸°
cmd.Parameters.AddWithValue("@mgmt_filename", filename != null ? filename : "");
```



### ğŸ§€HTMLHelper ê¸°ë³¸ ë©”ìŠ¤ë“œë“¤

| **HtmlHelper**    | **Strogly Typed**                    | **ë¹„ê³ **                                                     |
| :---------------- | :----------------------------------- | :----------------------------------------------------------- |
|                   |                                      |                                                              |
| Html.ActionLink   | ì—†ìŒ                                 | a tag                                                        |
| Html.TextBox      | Html.TextBoxFor                      |                                                              |
| Html.TextArea     | Html.TextAreaFor                     |                                                              |
| Html.Display      | Html.DisplayFor Html.DisplayForModel | ëª¨ë¸ ì†ì„±ì˜ í…œí”Œë¦¿ ì‚¬ìš©í•˜ì—¬ ì¶œë ¥ ëª¨ë¸ ì „ì²´ì— ëŒ€í•´ í…œí”Œë¦¿ ì ìš© ì¶œë ¥ |
| Html.Label        | Html.LabelFor                        | <label> íƒœê·¸                                                 |
| Html.Editor       | Html.EditorFor  Html.EditorForModel  | ëª¨ë¸ ì†ì„±ì˜ ë°ì´íƒ€ íƒ€ì…ì— ë”°ë¼ HTML ìƒì„± ëª¨ë¸ ì „ì²´ì— ëŒ€í•´ í…œí”Œë¦¿ ì ìš©í•˜ì—¬ HTML ìƒì„± |
| Html.CheckBox     | Html.CheckBoxFor                     |                                                              |
| Html.RadioButton  | Html.RadioButtonFor                  |                                                              |
| Html.DropDownList | Html.DropDownListFor                 |                                                              |
| Html.ListBox      | Html.ListBoxFor                      |                                                              |
| Html.Hidden       | Html.HiddenFor                       |                                                              |
| Password          | Html.PasswordFor                     |                                                              |



### ğŸ¥MVC ëª¨ë¸ì—ì„œ GridMVC ì‚¬ìš©ì‹œ

1. Dataí´ë”ì—ì„œ FileList.cs íŒŒì¼ ìƒì„± í›„ 

2. ```c#
    <!-- íŒŒì¼ ëª©ë¡ -->
   @Html.Grid(Model).Columns(columns =>
   {
       columns.Add().Titled("<input class='checkAll' type='checkbox' name='checkAll' value='.checkAll'/>").Encoded(false).Sanitized(false).SetWidth(10).RenderValueAs(o => Html.CheckBox("checkeditem", o.selected));
       columns.Add(c => c.moduleid).Titled("ë“±ë¡ID"); //1
       columns.Add(c => c.stop_use).Titled("ê¸ˆì§€"); //2
   }).WithPaging(10).Named("filelisttb");
   //í˜•ì‹ìœ¼ë¡œ ì„ ì–¸
   ```

3. ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì—ì„œ

   ```c#
   [ChildActionOnly]
           public ActionResult GetGrid(FileSearch param)
           {
               //í•˜ë‚˜ë¼ë„ ê²€ìƒ‰í•˜ëŠ” ë³€ìˆ˜ê°€ ì¡´ì¬í•œë‹¤ë©´ ì „ì²´ ì¡°íšŒê°€ ì•„ë‹Œ ê²€ìƒ‰ìœ¼ë¡œ ë„˜ì–´ê°
               if (param.fileid != null || param.filename != null || param.customer != null || param.developer != null || param.description != null || param.category != null || param.product != null || param.checkDiscontinued != null)
               {
   
                   var items = this.data.FileList(param.fileid, param.filename, param.customer, param.developer, param.description, param.category, param.product, param.checkDiscontinued).OrderByDescending(f => f.moduleid);
                   var grid = this.gridMvcHelper.GetAjaxGrid(items);
                   grid.AjaxGridSettings.PagePartitionSize = 9;
   
                   return PartialView("FileList", grid);
               }
               else
               {
                   var items = this.data.FileList().OrderByDescending(f => f.moduleid);
                   var grid = this.gridMvcHelper.GetAjaxGrid(items);
                   grid.AjaxGridSettings.PagePartitionSize = 9;
   
                   return PartialView("FileList", grid);
               }
   }//í˜•ì‹ìœ¼ë¡œ ì„ ì–¸
   ```

   

4. í”„ë¡ íŠ¸ ë¶€ë¶„ì—ì„œ

   ```c#
   <div class="row" id="table">
           @Html.Action("GetGrid", "File", Model)
   </div>
   ```

   

### ğŸ¥GridMVCì—ì„œ paging ì—ëŸ¬ ì‹œ

1. gridmvc-ext.jsíŒŒì¼ì—ì„œ self.loadPage í•¨ìˆ˜ ìˆ˜ì •

   1. $.get(gridUrl) ë¶€ë¶„ì—ì„œ postë¡œ ë°”ê¾¸ê³  ë§¤ê°œë³€ìˆ˜ë„ (gridUrl, param)ìœ¼ë¡œ ë°”ê¿ˆ

   2. ë°”ë¡œ ìœ„ì— ë¹ˆ param ì„ ì–¸ í›„ ê°ê° ë³€ìˆ˜ë“¤ ì„ ì–¸

      ```javascript
      var param = {};
                      if (gridUrl.indexOf("File/GridPager") != -1) {
                          param.fileid = $("#idfield").val(); 
                          param.filename = $("#filenamefield").val();
                          param.customer = $("#customerfield").val();
                          param.developer = $("#developerfield").val();
                          param.description = $("#descriptionfield").val();
                          param.category = $("#categoryfield").val();
                          param.product = $("#productfield").val();
      
                          if ($("#chk_discontinue").val() != true) {
                              param.checkDiscontinued = false;
                          } else {
                              $("#chk_discontinue").val() = true;
                          }
      
                          //param.checkDiscontinued = $("#chk_discontinue").val();
                      }
      ```




### ğŸ’ì²´í¬ë°•ìŠ¤ ê°’ ê°€ì ¸ì˜¬ë•Œ.....

```javascript
$("#ì²´í¬ë°•ìŠ¤ì•„ì´ë””ê°’").checkedì´ë‚˜ $("#ì²´í¬ë°•ìŠ¤ì•„ì´ë””ê°’").val()ì„ í•˜ë©´ ì œëŒ€ë¡œ ëœ í˜„ì¬ ì²´í¬ë°•ìŠ¤ ê°’ì„ ëª»ê°€ì ¸ì˜´!!

==>í•´ê²°ì±…: $("#chk_discontinue")[0].checkedìœ¼ë¡œ ë¶ˆëŸ¬ì™€ì•¼ í˜„ì¬ ì²´í¬/ì²´í¬ë˜ì§€ ì•Šì€ ì²´í¬ë°•ìŠ¤ ê°’ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ, í˜ì´ì§• ì²˜ë¦¬ì‹œ ìœ ì§€ë¨

//param.checkDiscontinued = $("#chk_discontinue").is(":checked")ë¡œë„ ê°€ëŠ¥
```

ì¶”ê°€ ì„¤ëª…: https://openlife.tistory.com/381



### ğŸˆì¹¼ëŸ¼ ìˆ¨ê¸¸ ë•Œ ì‚¬ìš©

- Site.cssì—ì„œ .classname{ ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ ì§€ì •}í•˜ê³ 
- column ì„¤ì • ì‹œ FileList.cshtml íŒŒì¼ì—ì„œ columns.Add(c => c.master_description).Titled("ê¸°ë³¸ ì„¤ëª…").Css("classname"); í˜•ì‹ìœ¼ë¡œ ì¶”ê°€



### ğŸ­ê¹ƒë© ë¨¸ì§€ í• ë•Œ ì£¼ì˜!

```
#   FMS/FMS.csproj
#   FMS/bin/FMS.dll
#   FMS/bin/FMS.dll.config
#   FMS/bin/FMS.pdb
#   FMS/obj/Debug/DesignTimeResolveAssemblyReferencesInput.cache
#   FMS/obj/Debug/FMS.csproj.FileListAbsolute.txt
#   FMS/obj/Debug/FMS.csprojResolveAssemblyReference.cache
#   FMS/obj/Debug/FMS.dll
#   FMS/obj/Debug/FMS.pdb

ignore ì‹œí‚¤ê¸°!!
```

**binê³¼ objíŒŒì¼ë“¤ì€ ë¬´ì¡°ê±´ ë¬´ì‹œí•˜ê¸°**



### ğŸ¥paging ë„˜ì–´ê°ˆë•Œ ìƒì„¸ì •ë³´ê°€ í‘œì‹œ ë˜ì§€ ì•Šì„ ë•Œ

```javascript
//gridmvc-ext.js íŒŒì¼(ê·¸ë¦¬ë“œ ì„¤ì • íŒŒì¼)
  ajaxify: function (options){
      ...
     //íŒì—…ì°½ ì²˜ìŒë¶€í„° ê³„ì† ë¶ˆëŸ¬ì˜¤ê¸° ì„¤ì •(ì¶”ê°€)
            bindpopupover(); 
  }

```

-> Search.cshtmlíŒŒì¼ ìƒë‹¨ì— <script src="@Url.Content("~/Scripts/gridmvc-ext.js")" type="text/javascript"></script>ë¼ê³  ì„ ì–¸ë˜ì–´ìˆìŒ

- ì„¤ì •íŒŒì¼ì´ ì´ íŒŒì¼ì— ì—°ê²°ë˜ì–´ ìˆì–´ searchì—ì„œ ì •ì˜í•œ í•¨ìˆ˜ëŠ” gridmvc-ext.js íŒŒì¼ì—ì„œë„ ì¸ì‹ì´ ë¨
- ajaxify ë¶€ë¶„ì—ì„œ ì´ë¯¸ ë°±ë‹¨ì—ì„œ ê°€ì ¸ì˜¨ ì •ë³´ë“¤ì„ ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í• ì§€ ì„¤ì •í•´ì£¼ëŠ” ë¶€ë¶„
- ë§¨ ì•„ë˜ Searchì—ì„œ ì •ì˜í•œ bindpopupover()ë¥¼ ì¶”ê°€í•´ì„œ í˜ì´ì§€ê°€ ë°”ë€Œë”ë¼ë„ ë¬´ì¡°ê±´ ìƒì„¸ë‚´ìš©ì´ ë‚˜ì˜¤ê²Œë” ì„¤ì •



### ğŸ¥Ÿë‹¤ìš´ë¡œë“œ ê°œë°œë°©ë²•

viewë‹¨ button eventì²˜ë¦¬ ë¶€ë¶„:

```javascript
function downloadAction() {
        //ì›í•˜ëŠ” ì¹¼ëŸ¼ ì„ íƒ
        var checklist = $("#downlistdiv").find("div > div > div > table > tbody > tr > td.grid-cell.hideColumn");
        
        var checkedPath = "";

        checklist.each(function () {
      
            //ë‹¤ìš´ë¡œë“œ ê²½ë¡œ(skywalker), í•´ë‹¹ ì¹¼ëŸ¼ì˜ ë‚´ìš©ì„ ì¶”ì¶œí•˜ì—¬ checkpathì— ëŒ€ì…(,ë¡œ ë¶™ì´ê¸°)
                checkedPath += $(this).parent().children()[3].innerText + ",";

        });

        console.log("downloadAction: " + checkedPath);
        if (checkedPath != "") {

            //ë§ˆì§€ë§‰ ""ê°’ì„ ì œê±°í•´ì„œ ë°›ì•„ì˜¨ ì„ íƒí•œ íŒŒì¼ë“¤ì— ëŒ€í•œ ê²½ë¡œ 
            checkedPath = checkedPath.substr(0, checkedPath.length - 1);
            
            //FileController íŒŒì¼ì˜ DownloadFile ë©”ì†Œë“œë¡œ ê°’ì„ ë³´ëƒ„(ë¬¸ìì—´ í˜•íƒœì¸ FilePath ë³€ìˆ˜ì— checkedPath ë§¤í•‘)
            $.ajax({
                type: "POST",
                url: '@Url.Action("DownloadFile", "File")',
                data: { FilePath: checkedPath },
                cache: false,
                success: function (result) {
                    //ë‹¤ìš´ë¡œë“œ ì™„ë£Œì‹œ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸êµ¬
                   alert("ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìš´ë°›ì€ ëª¨ë“ˆë“¤ì€ !!!ë°˜ë“œì‹œ ë‹¤ë¥¸ í´ë”!!!ë¡œ ì˜®ê²¨ì£¼ì„¸ìš”")
                },
                error: function (result) {
                    //ì—ëŸ¬ ë°œìƒ ì‹œ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸êµ¬
                    alert("í•´ë‹¹ íŒŒì¼ì€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ í˜„ì¬ ë””ë ‰í† ë¦¬ì— tempì™€ archive í´ë”ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")
                }
            });


        }
        else {
            alert("íŒŒì¼ì„ ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œí•´ì£¼ì„¸ìš”.");
        }
    }
```

**ë‹¤ìš´ë¡œë“œ ëª¨ë‹¬ ë·° ë¶€ë¶„ì— ê²½ë¡œ ì¹¼ëŸ¼ì„ ë°›ì•„ì˜¤ì§€ë§Œ hidden ìƒíƒœ**

controllerë¶€ë¶„:

```c#
   [HttpPost]
        public ActionResult DownloadFile(string FilePath)
        {
            //ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ê²½ë¡œ ë°›ì•„ì˜´
            List<string> files = FilePath.Split(',').ToList();

            //í˜„ì¬ í´ë” ì•„ë˜ archive í´ë” ì•„ë˜ archive.zip íŒŒì¼ ìƒì„±
            var archive = Server.MapPath("~/archive/archive.zip");

            //í˜„ì¬ í´ë” ì•„ë˜ temp í´ë” ì•„ë˜ ê°ê° ëª¨ë“ˆ ì €ì¥ë¨
            var temp = Server.MapPath("~/temp");

            // clear any existing archive ->ì•ˆí•˜ë©´ ì—ëŸ¬ ë°œìƒ
            if (System.IO.File.Exists(archive))
            {
                System.IO.File.Delete(archive);
                
            }

            // empty the temp folder->ì•ˆí•˜ë©´ ì—ëŸ¬ ë°œìƒ
            Directory.EnumerateFiles(temp).ToList().ForEach(f => System.IO.File.Delete(f));

            // copy the selected files to the temp folder
            files.ForEach(f => System.IO.File.Copy(f, Path.Combine(temp, Path.GetFileName(f))));

            // create a new archive
            ZipFile.CreateFromDirectory(temp, archive);

            return File(archive, "application/zip", "archive.zip");

        }
```

> í”„ë¡œì íŠ¸ ì°¸ì¡°ì— System.IO.Compressionê³¼ FileSystem ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€í•¨



### ğŸ¥setTimeout ê¸°ëŠ¥

```javascript
setTimeout(function () {
                           //ë™ì‘ ì²˜ë¦¬(alert)

                        }, 500); //0.5ì´ˆ ë”œë ˆì´(í”„ë¡ íŠ¸ì™€ ë°±ì—”ë“œì˜ ì‹œê°„ì°¨ì´ ë•Œë¬¸ì—)
```

> ë¹„ë™ê¸°ë€? ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë€ íŠ¹ì • ì½”ë“œì˜ ì—°ì‚°ì´ ëë‚  ë•Œê¹Œì§€ ì½”ë“œì˜ ì‹¤í–‰ì„ ë©ˆì¶”ì§€ ì•Šê³  ë‹¤ìŒ ì½”ë“œë¥¼ ë¨¼ì € ì‹¤í–‰í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íŠ¹ì„±ì„ ì˜ë¯¸

setTimeoutì„ ì•ˆí•´ë†“ìœ¼ë©´ í”„ë¡œê·¸ë˜ìŠ¤ë°”ê°€ ì§„í–‰ ì™„ë£Œë˜ê¸° ì „ì— `alert` ë¨¼ì € ì‹¤í–‰ë¨. ê·¸ ì´ìœ ëŠ” íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ëŒ€í•œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ë°›ì•„ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ì§€ ì•Šê³  ë‹¤ìŒ ì½”ë“œì¸ `alert`ë¥¼ ì‹¤í–‰í–ˆê¸° ë•Œë¬¸

<br>

ê·¸ë˜ì„œ ì½œë°±í•¨ìˆ˜ë¡œ í•´ê²°

```javascript
function parseValueDone(id) {
	auth(id, authDone);
}
function authDone(result) {
	display(result, displayDone);
}
function displayDone(text) {
	console.log(text);
}
$.get('url', function(response) {
	parseValue(response, parseValueDone);
});
```

ìœ„ ì½”ë“œëŠ” ì•ì˜ ì½œë°± ì§€ì˜¥ ì˜ˆì‹œë¥¼ ê°œì„ í•œ ì½”ë“œì…ë‹ˆë‹¤. ì¤‘ì²©í•´ì„œ ì„ ì–¸í–ˆë˜ ì½œë°± ìµëª… í•¨ìˆ˜ë¥¼ ê°ê°ì˜ í•¨ìˆ˜ë¡œ êµ¬ë¶„í•˜ì˜€ìŠµë‹ˆë‹¤. ì •ë¦¬ëœ ì½”ë“œë¥¼ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ajax í†µì‹ ìœ¼ë¡œ ë°›ì€ ë°ì´í„°ë¥¼ parseValue() ë©”ì„œë“œë¡œ íŒŒì‹± í•©ë‹ˆë‹¤. parseValueDone()ì— íŒŒì‹± í•œ ê²°ê³¼ê°’ì¸ idê°€ ì „ë‹¬ë˜ê³  auth() ë©”ì„œë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤. auth() ë©”ì„œë“œë¡œ ì¸ì¦ì„ ê±°ì¹˜ê³  ë‚˜ë©´ ì½œë°± í•¨ìˆ˜ authDone()ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. ì¸ì¦ ê²°ê³¼ ê°’ì¸ resultë¡œ display()ë¥¼ í˜¸ì¶œí•˜ë©´ ë§ˆì§€ë§‰ìœ¼ë¡œ displayDone() ë©”ì„œë“œê°€ ìˆ˜í–‰ë˜ë©´ì„œ textê°€ ì½˜ì†”ì— ì¶œë ¥ë©ë‹ˆë‹¤.

[ì¶œì²˜: ë¸”ë¡œê·¸](https://joshua1988.github.io/web-development/javascript/javascript-asynchronous-operation/)

í•´ê²°ë°©ë²•2: https://blueshw.github.io/2018/02/27/async-await/